
{
    "sql":
    "DROP TABLE IF EXISTS fplus.fourth_quadrant_accumulate_by_min_tmp; CREATE TABLE fplus.fourth_quadrant_accumulate_by_min_tmp (timestamp datetime, dn integer, ndn integer, df integer, ndf integer ); INSERT INTO fplus.fourth_quadrant_accumulate_by_min_tmp (SELECT DATE_FORMAT(EXECUTION_START_TIME, '%Y-%m-%d %H:%i:%s') AS timestamp, SUM(CASE WHEN fourth_quadrant = 'DETECTED_NORMAL' THEN 1 ELSE 0 END) AS dn, SUM(CASE WHEN fourth_quadrant = 'NO_DETECTED_NORMAL'  THEN 1 ELSE 0 END) AS ndn, SUM(CASE WHEN fourth_quadrant = 'DETECTED_FAILURE'    THEN 1 ELSE 0 END) AS df, SUM(CASE WHEN fourth_quadrant = 'NO_DETECTED_FAILURE' THEN 1 ELSE 0 END) AS ndf FROM fplus.fourth_quadrant GROUP BY DATE_FORMAT(EXECUTION_START_TIME, '%Y-%m-%d %H:%i:%s')); SELECT DATE_FORMAT(timestamp, '%Y-%m-%d %H:%i') AS time, (SELECT sum(dn) from fplus.fourth_quadrant_accumulate_by_min_tmp where date_format(timestamp, '%Y-%m-%d %H:%i') <= date_format(a.timestamp, '%Y-%m-%d %H:%i'))  as '検出／正常',(SELECT sum(ndn) from fplus.fourth_quadrant_accumulate_by_min_tmp where date_format(timestamp, '%Y-%m-%d %H:%i') <= date_format(a.timestamp, '%Y-%m-%d %H:%i'))  as '未検出／正常', (SELECT sum(df) from fplus.fourth_quadrant_accumulate_by_min_tmp where date_format(timestamp, '%Y-%m-%d %H:%i') <= date_format(a.timestamp, '%Y-%m-%d %H:%i'))  as '検出／異常',(SELECT sum(ndf) from fplus.fourth_quadrant_accumulate_by_min_tmp where date_format(timestamp, '%Y-%m-%d %H:%i') <= date_format(a.timestamp, '%Y-%m-%d %H:%i'))  as '未検出／異常' FROM fplus.fourth_quadrant_accumulate_by_min_tmp a  GROUP BY  time; DROP TABLE IF EXISTS fplus.fourth_quadrant_accumulate_by_min_tmp;",
    "where":["appl_id"]
}

